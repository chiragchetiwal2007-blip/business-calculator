<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BizData Vault - Professional Business Data Storage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
</head><style>body {
    background-color: #f8f9fa;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.container {
    max-width: 1200px;
}
header {
    background: linear-gradient(135deg, #007bff, #0056b3);
    color: white;
    padding: 20px;
    border-radius: 10px;
}
.table {
    border-radius: 10px;
    overflow: hidden;
}
.btn {
    border-radius: 5px;
}
.barcode-img {
    max-width: 100px;
    height: auto;
}</style>
<script>document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('dataForm');
    const dataBody = document.getElementById('dataBody');
    const searchInput = document.getElementById('search');
    const exportBtn = document.getElementById('exportBtn');
    let data = JSON.parse(localStorage.getItem('bizData')) || [];

    // Set default date to today
    document.getElementById('date').valueAsDate = new Date();

    // Render table
    function renderTable(filteredData = data) {
        dataBody.innerHTML = '';
        filteredData.forEach((item, index) => {
            const row = document.createElement('tr');
            const barcodeId = `barcode-${index}`;
            const paymentOptions = [];
            if (item.cash) paymentOptions.push('Cash');
            if (item.online) paymentOptions.push('Online');
            const paymentDisplay = paymentOptions.length > 0 ? paymentOptions.join(', ') : 'None';
            row.innerHTML = `
                <td>${item.date}</td>
                <td>${item.customerName}</td>
                <td>${item.phoneNo}</td>
                <td>${item.receivePayment}</td>
                <td>${item.pendingAmount}</td>
                <td><svg id="${barcodeId}" class="barcode-img"></svg></td>
                <td>${item.category}</td>
                <td>${paymentDisplay}</td>
                <td>
                    <button class="btn btn-warning btn-sm" onclick="editItem(${index})">Edit</button>
                    <button class="btn btn-danger btn-sm" onclick="deleteItem(${index})">Delete</button>
                </td>
            `;
            dataBody.appendChild(row);
            // Generate barcode
            JsBarcode(`#${barcodeId}`, item.barcode, { format: "CODE128", width: 1, height: 40 });
        });
    }

    // Add item
    form.addEventListener('submit', (e) => {
        e.preventDefault();
        const date = document.getElementById('date').value;
        const customerName = document.getElementById('customerName').value.trim();
        const phoneNo = document.getElementById('phoneNo').value.trim();
        const receivePayment = parseFloat(document.getElementById('receivePayment').value);
        const pendingAmount = parseFloat(document.getElementById('pendingAmount').value);
        const barcode = document.getElementById('barcode').value.trim();
        const category = document.getElementById('category').value.trim();
        const cash = document.getElementById('cash').checked;
        const online = document.getElementById('online').checked;
        if (date && customerName && phoneNo && !isNaN(receivePayment) && !isNaN(pendingAmount) && barcode && category) {
            data.push({ date, customerName, phoneNo, receivePayment, pendingAmount, barcode, category, cash, online });
            localStorage.setItem('bizData', JSON.stringify(data));
            renderTable();
            form.reset();
            document.getElementById('date').valueAsDate = new Date(); // Reset date
        } else {
            alert('Please fill all fields correctly.');
        }
    });

    // Edit item (prompt-based for simplicity)
    window.editItem = (index) => {
        const item = data[index];
        const newDate = prompt('Edit Date (YYYY-MM-DD):', item.date);
        const newCustomerName = prompt('Edit Customer Name:', item.customerName);
        const newPhoneNo = prompt('Edit Phone No:', item.phoneNo);
        const newReceivePayment = prompt('Edit Receive Payment:', item.receivePayment);
        const newPendingAmount = prompt('Edit Pending Amount:', item.pendingAmount);
        const newBarcode = prompt('Edit Barcode:', item.barcode);
        const newCategory = prompt('Edit Category:', item.category);
        const newCash = confirm('Is Cash selected?');
        const newOnline = confirm('Is Online selected?');
        if (newDate && newCustomerName && newPhoneNo && !isNaN(parseFloat(newReceivePayment)) && !isNaN(parseFloat(newPendingAmount)) && newBarcode && newCategory) {
            data[index] = {
                date: newDate,
                customerName: newCustomerName,
                phoneNo: newPhoneNo,
                receivePayment: parseFloat(newReceivePayment),
                pendingAmount: parseFloat(newPendingAmount),
                barcode: newBarcode,
                category: newCategory,
                cash: newCash,
                online: newOnline
            };
            localStorage.setItem('bizData', JSON.stringify(data));
            renderTable();
        }
    };

    // Delete item
    window.deleteItem = (index) => {
        if (confirm('Delete this entry?')) {
            data.splice(index, 1);
            localStorage.setItem('bizData', JSON.stringify(data));
            renderTable();
        }
    };

    // Search by customer name
    searchInput.addEventListener('input', () => {
        const query = searchInput.value.toLowerCase();
        const filtered = data.filter(item => item.customerName.toLowerCase().includes(query));
        renderTable(filtered);
    });

    // Export to CSV
    exportBtn.addEventListener('click', () => {
        let csv = 'Date,Customer Name,Phone No,Receive Payment,Pending Amount,Barcode,Category,Cash,Online\n';
        data.forEach(item => csv += `${item.date},${item.customerName},${item.phoneNo},${item.receivePayment},${item.pendingAmount},${item.barcode},${item.category},${item.cash},${item.online}\n`);
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'bizdata.csv';
        a.click();
    });

    // Initial render
    renderTable();
});</script>
<body>
    <div class="container mt-5">
        <header class="text-center mb-4">
            <h1 class="display-4">BizData Vault</h1>
            <p class="lead">Securely store and manage your business data.</p>
        </header>
        
        <form id="dataForm" class="mb-4">
            <div class="row mb-3">
                <div class="col-md-3">
                    <label for="date" class="form-label">Date</label>
                    <input type="date" id="date" class="form-control" required>
                </div>
                <div class="col-md-3">
                    <label for="customerName" class="form-label">Customer Name</label>
                    <input type="text" id="customerName" class="form-control" placeholder="e.g., John Doe" required>
                </div>
                <div class="col-md-3">
                    <label for="phoneNo" class="form-label">Phone No</label>
                    <input type="tel" id="phoneNo" class="form-control" placeholder="e.g., +1234567890" required>
                </div>
                <div class="col-md-3">
                    <label for="receivePayment" class="form-label">Receive Payment</label>
                    <input type="number" id="receivePayment" class="form-control" placeholder="e.g., 500" step="0.01" required>
                </div>
            </div>
            <div class="row mb-3">
                <div class="col-md-3">
                    <label for="pendingAmount" class="form-label">Pending Amount</label>
                    <input type="number" id="pendingAmount" class="form-control" placeholder="e.g., 200" step="0.01" required>
                </div>
                <div class="col-md-3">
                    <label for="barcode" class="form-label">Transfer Barcode</label>
                    <input type="text" id="barcode" class="form-control" placeholder="e.g., 123456789" required>
                </div>
                <div class="col-md-3">
                    <label for="category" class="form-label">Category</label>
                    <input type="text" id="category" class="form-control" placeholder="e.g., Invoice" required>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Payment Options</label>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="cash">
                        <label class="form-check-label" for="cash">Cash</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="online">
                        <label class="form-check-label" for="online">Online</label>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <button type="submit" class="btn btn-primary w-100">Add Entry</button>
                </div>
            </div>
        </form>
        
        <div class="mb-3">
            <input type="text" id="search" class="form-control" placeholder="Search by customer name...">
        </div>
        
        <table class="table table-striped" id="dataTable">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Customer Name</th>
                    <th>Phone No</th>
                    <th>Receive Payment</th>
                    <th>Pending Amount</th>
                    <th>Barcode</th>
                    <th>Category</th>
                    <th>Payment Options</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="dataBody"></tbody>
        </table>
        
        <button id="exportBtn" class="btn btn-secondary mt-3">Export to CSV</button>
    </div>
    
    <script src="script.js"></script>
</body>
</html>